{"filter":false,"title":"app.py","tooltip":"/app.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":115,"column":40},"end":{"row":115,"column":68},"action":"insert","lines":["{'_id': ObjectId(recipe_id)}"],"id":3145}],[{"start":{"row":115,"column":12},"end":{"row":115,"column":69},"action":"remove","lines":["mongo.db.recipes.update_one({'_id': ObjectId(recipe_id)})"],"id":3146},{"start":{"row":115,"column":12},"end":{"row":115,"column":13},"action":"insert","lines":["r"]},{"start":{"row":115,"column":13},"end":{"row":115,"column":14},"action":"insert","lines":["e"]},{"start":{"row":115,"column":14},"end":{"row":115,"column":15},"action":"insert","lines":["c"]},{"start":{"row":115,"column":15},"end":{"row":115,"column":16},"action":"insert","lines":["i"]},{"start":{"row":115,"column":16},"end":{"row":115,"column":17},"action":"insert","lines":["p"]},{"start":{"row":115,"column":17},"end":{"row":115,"column":18},"action":"insert","lines":["e"]},{"start":{"row":115,"column":18},"end":{"row":115,"column":19},"action":"insert","lines":["."]},{"start":{"row":115,"column":19},"end":{"row":115,"column":20},"action":"insert","lines":["u"]},{"start":{"row":115,"column":20},"end":{"row":115,"column":21},"action":"insert","lines":["p"]},{"start":{"row":115,"column":21},"end":{"row":115,"column":22},"action":"insert","lines":["d"]}],[{"start":{"row":115,"column":22},"end":{"row":115,"column":23},"action":"insert","lines":["a"],"id":3147},{"start":{"row":115,"column":23},"end":{"row":115,"column":24},"action":"insert","lines":["t"]},{"start":{"row":115,"column":24},"end":{"row":115,"column":25},"action":"insert","lines":["e"]}],[{"start":{"row":115,"column":19},"end":{"row":115,"column":25},"action":"remove","lines":["update"],"id":3148},{"start":{"row":115,"column":19},"end":{"row":115,"column":29},"action":"insert","lines":["update_one"]}],[{"start":{"row":115,"column":29},"end":{"row":115,"column":31},"action":"insert","lines":["()"],"id":3149}],[{"start":{"row":115,"column":30},"end":{"row":126,"column":12},"action":"insert","lines":["{","#          \"recipe_title\" : form_normal[\"recipe_title\"],","#          \"sub_title\" : form_normal[\"sub_title\"],","#          \"makes\": form_normal[\"makes\"],","#          \"takes\": form_normal[\"takes\"],","#          \"ingredients\":flat_form[\"ingredients\"],","#          \"method\":flat_form[\"method\"],","#          \"rating\":0,","#          \"tags\": flat_form[\"tags\"],","#          \"created_by\": session['username'],","#          #\"recipe_img_name\": recipe_img_name","#          }"],"id":3150}],[{"start":{"row":116,"column":0},"end":{"row":116,"column":2},"action":"remove","lines":["# "],"id":3151},{"start":{"row":117,"column":0},"end":{"row":117,"column":2},"action":"remove","lines":["# "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":2},"action":"remove","lines":["# "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":2},"action":"remove","lines":["# "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":2},"action":"remove","lines":["# "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":2},"action":"remove","lines":["# "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":2},"action":"remove","lines":["# "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":2},"action":"remove","lines":["# "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":2},"action":"remove","lines":["# "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":2},"action":"remove","lines":["# "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":2},"action":"remove","lines":["# "]}],[{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"remove","lines":["    "],"id":3152},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"remove","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"remove","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"remove","lines":["    "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":4},"action":"remove","lines":["    "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":4},"action":"remove","lines":["    "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":4},"action":"remove","lines":["    "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":4},"action":"remove","lines":["    "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"remove","lines":["    "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":4},"action":"remove","lines":["    "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "],"id":3153},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"insert","lines":["    "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":4},"action":"insert","lines":["    "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":4},"action":"insert","lines":["    "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":4},"action":"insert","lines":["    "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":4},"action":"insert","lines":["    "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"insert","lines":["    "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":4},"action":"insert","lines":["    "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "],"id":3154},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"insert","lines":["    "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":4},"action":"insert","lines":["    "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":4},"action":"insert","lines":["    "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":4},"action":"insert","lines":["    "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":4},"action":"insert","lines":["    "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"insert","lines":["    "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":4},"action":"insert","lines":["    "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"insert","lines":["    "],"id":3155},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"insert","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"insert","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"insert","lines":["    "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":4},"action":"insert","lines":["    "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":4},"action":"insert","lines":["    "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":4},"action":"insert","lines":["    "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":4},"action":"insert","lines":["    "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"insert","lines":["    "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":4},"action":"insert","lines":["    "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"remove","lines":["    "],"id":3156},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"remove","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"remove","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"remove","lines":["    "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":4},"action":"remove","lines":["    "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":4},"action":"remove","lines":["    "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":4},"action":"remove","lines":["    "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":4},"action":"remove","lines":["    "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"remove","lines":["    "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":4},"action":"remove","lines":["    "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":126,"column":15},"end":{"row":127,"column":0},"action":"insert","lines":["",""],"id":3157},{"start":{"row":127,"column":0},"end":{"row":127,"column":13},"action":"insert","lines":["             "]},{"start":{"row":127,"column":13},"end":{"row":127,"column":14},"action":"insert","lines":["r"]},{"start":{"row":127,"column":14},"end":{"row":127,"column":15},"action":"insert","lines":["e"]},{"start":{"row":127,"column":15},"end":{"row":127,"column":16},"action":"insert","lines":["t"]},{"start":{"row":127,"column":16},"end":{"row":127,"column":17},"action":"insert","lines":["u"]},{"start":{"row":127,"column":17},"end":{"row":127,"column":18},"action":"insert","lines":["r"]},{"start":{"row":127,"column":18},"end":{"row":127,"column":19},"action":"insert","lines":["n"]}],[{"start":{"row":127,"column":19},"end":{"row":127,"column":20},"action":"insert","lines":[" "],"id":3158},{"start":{"row":127,"column":20},"end":{"row":127,"column":21},"action":"insert","lines":["r"]},{"start":{"row":127,"column":21},"end":{"row":127,"column":22},"action":"insert","lines":["e"]},{"start":{"row":127,"column":22},"end":{"row":127,"column":23},"action":"insert","lines":["n"]},{"start":{"row":127,"column":23},"end":{"row":127,"column":24},"action":"insert","lines":["d"]},{"start":{"row":127,"column":24},"end":{"row":127,"column":25},"action":"insert","lines":["e"]},{"start":{"row":127,"column":25},"end":{"row":127,"column":26},"action":"insert","lines":["r"]}],[{"start":{"row":127,"column":26},"end":{"row":127,"column":27},"action":"insert","lines":["_"],"id":3159},{"start":{"row":127,"column":27},"end":{"row":127,"column":28},"action":"insert","lines":["t"]},{"start":{"row":127,"column":28},"end":{"row":127,"column":29},"action":"insert","lines":["e"]},{"start":{"row":127,"column":29},"end":{"row":127,"column":30},"action":"insert","lines":["m"]},{"start":{"row":127,"column":30},"end":{"row":127,"column":31},"action":"insert","lines":["p"]},{"start":{"row":127,"column":31},"end":{"row":127,"column":32},"action":"insert","lines":["l"]},{"start":{"row":127,"column":32},"end":{"row":127,"column":33},"action":"insert","lines":["a"]},{"start":{"row":127,"column":33},"end":{"row":127,"column":34},"action":"insert","lines":["t"]},{"start":{"row":127,"column":34},"end":{"row":127,"column":35},"action":"insert","lines":["e"]}],[{"start":{"row":127,"column":35},"end":{"row":127,"column":37},"action":"insert","lines":["()"],"id":3160}],[{"start":{"row":127,"column":36},"end":{"row":127,"column":38},"action":"insert","lines":["''"],"id":3161}],[{"start":{"row":127,"column":37},"end":{"row":127,"column":38},"action":"insert","lines":["r"],"id":3162},{"start":{"row":127,"column":38},"end":{"row":127,"column":39},"action":"insert","lines":["e"]},{"start":{"row":127,"column":39},"end":{"row":127,"column":40},"action":"insert","lines":["c"]},{"start":{"row":127,"column":40},"end":{"row":127,"column":41},"action":"insert","lines":["i"]},{"start":{"row":127,"column":41},"end":{"row":127,"column":42},"action":"insert","lines":["p"]},{"start":{"row":127,"column":42},"end":{"row":127,"column":43},"action":"insert","lines":["e"]}],[{"start":{"row":127,"column":37},"end":{"row":127,"column":43},"action":"remove","lines":["recipe"],"id":3163},{"start":{"row":127,"column":37},"end":{"row":127,"column":48},"action":"insert","lines":["recipe_card"]}],[{"start":{"row":127,"column":49},"end":{"row":127,"column":50},"action":"insert","lines":[","],"id":3164}],[{"start":{"row":127,"column":50},"end":{"row":127,"column":51},"action":"insert","lines":[" "],"id":3165},{"start":{"row":127,"column":51},"end":{"row":127,"column":52},"action":"insert","lines":["r"]},{"start":{"row":127,"column":52},"end":{"row":127,"column":53},"action":"insert","lines":["e"]},{"start":{"row":127,"column":53},"end":{"row":127,"column":54},"action":"insert","lines":["c"]},{"start":{"row":127,"column":54},"end":{"row":127,"column":55},"action":"insert","lines":["u"]},{"start":{"row":127,"column":55},"end":{"row":127,"column":56},"action":"insert","lines":["p"]}],[{"start":{"row":127,"column":55},"end":{"row":127,"column":56},"action":"remove","lines":["p"],"id":3166},{"start":{"row":127,"column":54},"end":{"row":127,"column":55},"action":"remove","lines":["u"]}],[{"start":{"row":127,"column":20},"end":{"row":127,"column":55},"action":"remove","lines":["render_template('recipe_card', rec)"],"id":3167},{"start":{"row":127,"column":20},"end":{"row":127,"column":21},"action":"insert","lines":["r"]},{"start":{"row":127,"column":21},"end":{"row":127,"column":22},"action":"insert","lines":["e"]},{"start":{"row":127,"column":22},"end":{"row":127,"column":23},"action":"insert","lines":["d"]},{"start":{"row":127,"column":23},"end":{"row":127,"column":24},"action":"insert","lines":["i"]},{"start":{"row":127,"column":24},"end":{"row":127,"column":25},"action":"insert","lines":["r"]},{"start":{"row":127,"column":25},"end":{"row":127,"column":26},"action":"insert","lines":["e"]},{"start":{"row":127,"column":26},"end":{"row":127,"column":27},"action":"insert","lines":["c"]},{"start":{"row":127,"column":27},"end":{"row":127,"column":28},"action":"insert","lines":["t"]}],[{"start":{"row":127,"column":28},"end":{"row":127,"column":30},"action":"insert","lines":["()"],"id":3168}],[{"start":{"row":127,"column":29},"end":{"row":127,"column":30},"action":"insert","lines":["u"],"id":3169},{"start":{"row":127,"column":30},"end":{"row":127,"column":31},"action":"insert","lines":["r"]},{"start":{"row":127,"column":31},"end":{"row":127,"column":32},"action":"insert","lines":["l"]},{"start":{"row":127,"column":32},"end":{"row":127,"column":33},"action":"insert","lines":["_"]},{"start":{"row":127,"column":33},"end":{"row":127,"column":34},"action":"insert","lines":["f"]},{"start":{"row":127,"column":34},"end":{"row":127,"column":35},"action":"insert","lines":["o"]},{"start":{"row":127,"column":35},"end":{"row":127,"column":36},"action":"insert","lines":["r"]}],[{"start":{"row":127,"column":36},"end":{"row":127,"column":38},"action":"insert","lines":["()"],"id":3170}],[{"start":{"row":127,"column":37},"end":{"row":127,"column":39},"action":"insert","lines":["''"],"id":3171}],[{"start":{"row":127,"column":38},"end":{"row":127,"column":39},"action":"insert","lines":["r"],"id":3172},{"start":{"row":127,"column":39},"end":{"row":127,"column":40},"action":"insert","lines":["e"]},{"start":{"row":127,"column":40},"end":{"row":127,"column":41},"action":"insert","lines":["c"]},{"start":{"row":127,"column":41},"end":{"row":127,"column":42},"action":"insert","lines":["i"]},{"start":{"row":127,"column":42},"end":{"row":127,"column":43},"action":"insert","lines":["p"]},{"start":{"row":127,"column":43},"end":{"row":127,"column":44},"action":"insert","lines":["e"]},{"start":{"row":127,"column":44},"end":{"row":127,"column":45},"action":"insert","lines":["_"]},{"start":{"row":127,"column":45},"end":{"row":127,"column":46},"action":"insert","lines":["c"]},{"start":{"row":127,"column":46},"end":{"row":127,"column":47},"action":"insert","lines":["a"]},{"start":{"row":127,"column":47},"end":{"row":127,"column":48},"action":"insert","lines":["r"]},{"start":{"row":127,"column":48},"end":{"row":127,"column":49},"action":"insert","lines":["d"]}],[{"start":{"row":127,"column":13},"end":{"row":127,"column":52},"action":"remove","lines":["return redirect(url_for('recipe_card'))"],"id":3173},{"start":{"row":127,"column":13},"end":{"row":127,"column":88},"action":"insert","lines":["return redirect(url_for('recipe_card', recipe_id = new_recipe.inserted_id))"]}],[{"start":{"row":114,"column":4},"end":{"row":114,"column":8},"action":"remove","lines":["    "],"id":3174}],[{"start":{"row":115,"column":0},"end":{"row":115,"column":4},"action":"remove","lines":["    "],"id":3175},{"start":{"row":116,"column":0},"end":{"row":116,"column":4},"action":"remove","lines":["    "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":4},"action":"remove","lines":["    "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":4},"action":"remove","lines":["    "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":4},"action":"remove","lines":["    "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":4},"action":"remove","lines":["    "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":4},"action":"remove","lines":["    "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":4},"action":"remove","lines":["    "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":4},"action":"remove","lines":["    "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":4},"action":"remove","lines":["    "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":4},"action":"remove","lines":["    "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"remove","lines":["    "]},{"start":{"row":127,"column":0},"end":{"row":127,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":127,"column":8},"end":{"row":127,"column":9},"action":"remove","lines":[" "],"id":3176}],[{"start":{"row":0,"column":0},"end":{"row":155,"column":0},"action":"remove","lines":["import os","import bcrypt","from flask import Flask, render_template, redirect, request, url_for, session","from forms.forms import AddRecipeForm, LoginForm, SignupForm","from flask_pymongo import PyMongo","from bson.objectid import ObjectId","","app = Flask(__name__)","","app.config[\"MONGO_DBNAME\"] = 'bakingBookRecipes'","app.config[\"MONGO_URI\"] = os.getenv('MONGO_URI', 'mongodb://localhost')","app.secret_key = os.getenv(\"SECRET\")","","","mongo = PyMongo(app)","","@app.route('/')","@app.route('/show_recipes')","def show_recipes():","    return render_template(\"recipes.html\", recipes=mongo.db.recipes.find())","","@app.route('/login', methods=['GET','POST'])","def login():","    if 'logged_in' in session:","        return redirect(url_for('show_recipes'))","        ","    form = LoginForm(request.form)","    if request.method == \"POST\":","        users = mongo.db.users","        login_username = users.find_one({'user' : request.form['username']})","        if login_username is not None:","            if bcrypt.checkpw(request.form['password'].encode('utf-8'), login_username['password'].encode('utf-8')): ","                session['username'] = request.form['username']","                session['logged_in'] = True","                return redirect(url_for('show_recipes'))","    ","        return render_template('login.html', form = form) + 'Invalid username / password combination'","        ","    return render_template('login.html', form = form) ","    ","@app.route('/logout')","def logout():","    session.clear()","    return redirect(url_for('show_recipes'))","","@app.route('/sign_up', methods=['GET', 'POST'])","def sign_up():","    form= SignupForm(request.form)","    if request.method == 'POST':","        users = mongo.db.users","        existing_user = users.find_one({'user' : request.form['username']})","        ","        if existing_user is None:","            hashpass = bcrypt.hashpw(request.form['password'].encode('utf-8'), bcrypt.gensalt())","            users.insert_one({'user': request.form['username'], 'password' : hashpass.decode()})","            session['username'] = request.form['username']","            return redirect (url_for('show_recipes'))","        ","        return 'That username already exists, please choose another.'","            ","    return render_template('signup.html', form = form)","    ","@app.route('/recipe_card/<recipe_id>')","def recipe_card(recipe_id):","    return render_template(\"recipecard.html\", recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)}))","","#@app.route('/recipe_card/<recipe_id>', methods=['POST'])","#def save_recipe(recipe_id, user_id):"," #   user = mongo.db.user.find_one({'_id': ObjectId('5d567ffe1c9d44000015f495')})","  #  user.update_one({ '$push': { 'saved_recipes': ObjectId(recipe_id) }})","   # return render_template(\"recipecard.html\", recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)}))","","@app.route('/submit_recipe', methods=['GET','POST'])","def submit_recipe():","    if 'logged_in' in session:","        new_recipe = None","        form = AddRecipeForm(request.form)","        recipes = mongo.db.recipes","        form_normal = request.form.to_dict()","        flat_form = request.form.to_dict(flat=False)","       # if 'recipe_img' in request.files:","          #  recipe_img = request.files['recipe_img']","          #  mongo.save_file(recipe_img.filename, recipe_img)","          #  recipe_img_name = recipe_img.filename","        if request.method == \"POST\":","            new_recipe = recipes.insert_one(","             {","             \"recipe_title\" : form_normal[\"recipe_title\"],","             \"sub_title\" : form_normal[\"sub_title\"],","             \"makes\": form_normal[\"makes\"],","             \"takes\": form_normal[\"takes\"],","             \"ingredients\":flat_form[\"ingredients\"],","             \"method\":flat_form[\"method\"],","             \"rating\":0,","             \"tags\": flat_form[\"tags\"],","             \"created_by\": session['username'],","             #\"recipe_img_name\": recipe_img_name","             }","               )","            ","            return redirect(url_for('recipe_card', recipe_id = new_recipe.inserted_id))","        return render_template('submitrecipe.html', form=form);","    return redirect(url_for('login'))","    ","@app.route('/my_recipes')","def my_recipes():","    username = session[\"username\"]","    return render_template(\"myrecipes.html\", recipes=mongo.db.recipes.find({'created_by': username}))","","@app.route('/edit_recipe/<recipe_id>', methods=['GET','POST'])","def edit_recipe(recipe_id):","    recipe = mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)})","    form = AddRecipeForm()","    form = AddRecipeForm(data=recipe)","    if request.method == \"POST\":","        recipe.update_one({","         \"recipe_title\" : form_normal[\"recipe_title\"],","         \"sub_title\" : form_normal[\"sub_title\"],","         \"makes\": form_normal[\"makes\"],","         \"takes\": form_normal[\"takes\"],","         \"ingredients\":flat_form[\"ingredients\"],","         \"method\":flat_form[\"method\"],","         \"rating\":0,","         \"tags\": flat_form[\"tags\"],","         \"created_by\": session['username'],","         #\"recipe_img_name\": recipe_img_name","         })","        return redirect(url_for('recipe_card', recipe_id = new_recipe.inserted_id))","    return render_template('editrecipe.html', recipe=recipe, form=form)","","    ","# @app.route('/update_recipe/<recipe_id>')","# def update_recipe(recipe_id):","#     recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)})","#     if request.method == \"POST\":","#         recipes.update_one(","#          {","#          \"recipe_title\" : form_normal[\"recipe_title\"],","#          \"sub_title\" : form_normal[\"sub_title\"],","#          \"makes\": form_normal[\"makes\"],","#          \"takes\": form_normal[\"takes\"],","#          \"ingredients\":flat_form[\"ingredients\"],","#          \"method\":flat_form[\"method\"],","#          \"rating\":0,","#          \"tags\": flat_form[\"tags\"],","#          \"created_by\": session['username'],","#          #\"recipe_img_name\": recipe_img_name","#          }","#           )","#     return render_template(\"recipecard.html\", recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)}))","","if __name__=='__main__':","    app.run(host=os.environ.get('IP'), port=int(os.environ.get('PORT')), debug=True)","","",""],"id":3177},{"start":{"row":0,"column":0},"end":{"row":178,"column":0},"action":"insert","lines":["#!/usr/bin/python","# -*- coding: utf-8 -*-","import os","import bcrypt","from flask import Flask, render_template, redirect, request, url_for, \\","    session","from forms.forms import AddRecipeForm, LoginForm, SignupForm","from flask_pymongo import PyMongo","from bson.objectid import ObjectId","","app = Flask(__name__)","","app.config['MONGO_DBNAME'] = 'bakingBookRecipes'","app.config['MONGO_URI'] = os.getenv('MONGO_URI', 'mongodb://localhost')","app.secret_key = os.getenv('SECRET')","","mongo = PyMongo(app)","","","@app.route('/')","@app.route('/show_recipes')","def show_recipes():","    return render_template('recipes.html',","                           recipes=mongo.db.recipes.find())","","","@app.route('/login', methods=['GET', 'POST'])","def login():","    if 'logged_in' in session:","        return redirect(url_for('show_recipes'))","","    form = LoginForm(request.form)","    if request.method == 'POST':","        users = mongo.db.users","        login_username = users.find_one({'user': request.form['username'","                ]})","        if login_username is not None:","            if bcrypt.checkpw(request.form['password'].encode('utf-8'),","                              login_username['password'].encode('utf-8'","                              )):","                session['username'] = request.form['username']","                session['logged_in'] = True","                return redirect(url_for('show_recipes'))","","        return render_template('login.html', form=form) \\","            + 'Invalid username / password combination'","","    return render_template('login.html', form=form)","","","@app.route('/logout')","def logout():","    session.clear()","    return redirect(url_for('show_recipes'))","","","@app.route('/sign_up', methods=['GET', 'POST'])","def sign_up():","    form = SignupForm(request.form)","    if request.method == 'POST':","        users = mongo.db.users","        existing_user = users.find_one({'user': request.form['username'","                ]})","","        if existing_user is None:","            hashpass = bcrypt.hashpw(request.form['password'","                    ].encode('utf-8'), bcrypt.gensalt())","            users.insert_one({'user': request.form['username'],","                             'password': hashpass.decode()})","            session['username'] = request.form['username']","            return redirect(url_for('show_recipes'))","","        return 'That username already exists, please choose another.'","","    return render_template('signup.html', form=form)","","","@app.route('/recipe_card/<recipe_id>')","def recipe_card(recipe_id):","    return render_template('recipecard.html',","                           recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)}))","","","# @app.route('/recipe_card/<recipe_id>', methods=['POST'])","# def save_recipe(recipe_id, user_id):"," #   user = mongo.db.user.find_one({'_id': ObjectId('5d567ffe1c9d44000015f495')})","  #  user.update_one({ '$push': { 'saved_recipes': ObjectId(recipe_id) }})","   # return render_template(\"recipecard.html\", recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)}))","","@app.route('/submit_recipe', methods=['GET', 'POST'])","def submit_recipe():","    if 'logged_in' in session:","        new_recipe = None","        form = AddRecipeForm(request.form)","        recipes = mongo.db.recipes","        form_normal = request.form.to_dict()","        flat_form = request.form.to_dict(flat=False)","","       # if 'recipe_img' in request.files:","          #  recipe_img = request.files['recipe_img']","          #  mongo.save_file(recipe_img.filename, recipe_img)","          #  recipe_img_name = recipe_img.filename","","        if request.method == 'POST':","            new_recipe = recipes.insert_one({","                'recipe_title': form_normal['recipe_title'],","                'sub_title': form_normal['sub_title'],","                'makes': form_normal['makes'],","                'takes': form_normal['takes'],","                'ingredients': flat_form['ingredients'],","                'method': flat_form['method'],","                'rating': 0,","                'tags': flat_form['tags'],","                'created_by': session['username'],","                })","","             # \"recipe_img_name\": recipe_img_name","","            return redirect(url_for('recipe_card',","                            recipe_id=new_recipe.inserted_id))","        return render_template('submitrecipe.html', form=form)","    return redirect(url_for('login'))","","","@app.route('/my_recipes')","def my_recipes():","    username = session['username']","    return render_template('myrecipes.html',","                           recipes=mongo.db.recipes.find({'created_by': username}))","","","@app.route('/edit_recipe/<recipe_id>', methods=['GET', 'POST'])","def edit_recipe(recipe_id):","    recipe = mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)})","    form = AddRecipeForm()","    form = AddRecipeForm(data=recipe)","    if request.method == 'POST':","        recipe.update_one({","            'recipe_title': form_normal['recipe_title'],","            'sub_title': form_normal['sub_title'],","            'makes': form_normal['makes'],","            'takes': form_normal['takes'],","            'ingredients': flat_form['ingredients'],","            'method': flat_form['method'],","            'rating': 0,","            'tags': flat_form['tags'],","            'created_by': session['username'],","            })","","         # \"recipe_img_name\": recipe_img_name","","        return redirect(url_for('recipe_card',","                        recipe_id=new_recipe.inserted_id))","    return render_template('editrecipe.html', recipe=recipe, form=form)","","# @app.route('/update_recipe/<recipe_id>')","# def update_recipe(recipe_id):","#     recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)})","#     if request.method == \"POST\":","#         recipes.update_one(","#          {","#          \"recipe_title\" : form_normal[\"recipe_title\"],","#          \"sub_title\" : form_normal[\"sub_title\"],","#          \"makes\": form_normal[\"makes\"],","#          \"takes\": form_normal[\"takes\"],","#          \"ingredients\":flat_form[\"ingredients\"],","#          \"method\":flat_form[\"method\"],","#          \"rating\":0,","#          \"tags\": flat_form[\"tags\"],","#          \"created_by\": session['username'],","#          #\"recipe_img_name\": recipe_img_name","#          }","#           )","#     return render_template(\"recipecard.html\", recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)}))","","if __name__ == '__main__':","    app.run(host=os.environ.get('IP'), port=int(os.environ.get('PORT'","            )), debug=True)",""]}],[{"start":{"row":152,"column":20},"end":{"row":152,"column":24},"action":"remove","lines":["    "],"id":3178},{"start":{"row":152,"column":16},"end":{"row":152,"column":20},"action":"remove","lines":["    "]},{"start":{"row":152,"column":12},"end":{"row":152,"column":16},"action":"remove","lines":["    "]},{"start":{"row":152,"column":8},"end":{"row":152,"column":12},"action":"remove","lines":["    "]},{"start":{"row":152,"column":4},"end":{"row":152,"column":8},"action":"remove","lines":["    "]},{"start":{"row":152,"column":0},"end":{"row":152,"column":4},"action":"remove","lines":["    "]},{"start":{"row":151,"column":46},"end":{"row":152,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":137,"column":14},"end":{"row":137,"column":25},"action":"remove","lines":[".update_one"],"id":3179},{"start":{"row":137,"column":14},"end":{"row":137,"column":15},"action":"insert","lines":["."]},{"start":{"row":137,"column":15},"end":{"row":137,"column":16},"action":"insert","lines":["u"]},{"start":{"row":137,"column":16},"end":{"row":137,"column":17},"action":"insert","lines":["p"]}],[{"start":{"row":137,"column":17},"end":{"row":137,"column":18},"action":"insert","lines":["d"],"id":3180},{"start":{"row":137,"column":18},"end":{"row":137,"column":19},"action":"insert","lines":["a"]},{"start":{"row":137,"column":19},"end":{"row":137,"column":20},"action":"insert","lines":["r"]},{"start":{"row":137,"column":20},"end":{"row":137,"column":21},"action":"insert","lines":["t"]}],[{"start":{"row":137,"column":20},"end":{"row":137,"column":21},"action":"remove","lines":["t"],"id":3181},{"start":{"row":137,"column":19},"end":{"row":137,"column":20},"action":"remove","lines":["r"]}],[{"start":{"row":137,"column":19},"end":{"row":137,"column":20},"action":"insert","lines":["t"],"id":3182},{"start":{"row":137,"column":20},"end":{"row":137,"column":21},"action":"insert","lines":["e"]}],[{"start":{"row":137,"column":21},"end":{"row":137,"column":22},"action":"insert","lines":["_"],"id":3183},{"start":{"row":137,"column":22},"end":{"row":137,"column":23},"action":"insert","lines":["o"]},{"start":{"row":137,"column":23},"end":{"row":137,"column":24},"action":"insert","lines":["n"]},{"start":{"row":137,"column":24},"end":{"row":137,"column":25},"action":"insert","lines":["e"]}],[{"start":{"row":149,"column":45},"end":{"row":150,"column":0},"action":"insert","lines":["",""],"id":3184},{"start":{"row":150,"column":0},"end":{"row":150,"column":9},"action":"insert","lines":["         "]},{"start":{"row":150,"column":9},"end":{"row":151,"column":0},"action":"insert","lines":["",""]},{"start":{"row":151,"column":0},"end":{"row":151,"column":9},"action":"insert","lines":["         "]},{"start":{"row":151,"column":9},"end":{"row":152,"column":0},"action":"insert","lines":["",""]},{"start":{"row":152,"column":0},"end":{"row":152,"column":9},"action":"insert","lines":["         "]},{"start":{"row":152,"column":9},"end":{"row":153,"column":0},"action":"insert","lines":["",""]},{"start":{"row":153,"column":0},"end":{"row":153,"column":9},"action":"insert","lines":["         "]},{"start":{"row":153,"column":9},"end":{"row":154,"column":0},"action":"insert","lines":["",""]},{"start":{"row":154,"column":0},"end":{"row":154,"column":9},"action":"insert","lines":["         "]},{"start":{"row":154,"column":9},"end":{"row":155,"column":0},"action":"insert","lines":["",""]},{"start":{"row":155,"column":0},"end":{"row":155,"column":9},"action":"insert","lines":["         "]}],[{"start":{"row":152,"column":9},"end":{"row":159,"column":36},"action":"insert","lines":["myclient = pymongo.MongoClient(\"mongodb://localhost:27017/\")","mydb = myclient[\"mydatabase\"]","mycol = mydb[\"customers\"]","","myquery = { \"address\": \"Valley 345\" }","newvalues = { \"$set\": { \"address\": \"Canyon 123\" } }","","mycol.update_one(myquery, newvalues)"],"id":3185}],[{"start":{"row":137,"column":8},"end":{"row":137,"column":14},"action":"remove","lines":["recipe"],"id":3186},{"start":{"row":137,"column":8},"end":{"row":137,"column":9},"action":"insert","lines":["m"]},{"start":{"row":137,"column":9},"end":{"row":137,"column":10},"action":"insert","lines":["o"]},{"start":{"row":137,"column":10},"end":{"row":137,"column":11},"action":"insert","lines":["n"]},{"start":{"row":137,"column":11},"end":{"row":137,"column":12},"action":"insert","lines":["g"]},{"start":{"row":137,"column":12},"end":{"row":137,"column":13},"action":"insert","lines":["o"]},{"start":{"row":137,"column":13},"end":{"row":137,"column":14},"action":"insert","lines":["."]}],[{"start":{"row":137,"column":14},"end":{"row":137,"column":15},"action":"insert","lines":["d"],"id":3187},{"start":{"row":137,"column":15},"end":{"row":137,"column":16},"action":"insert","lines":["b"]},{"start":{"row":137,"column":16},"end":{"row":137,"column":17},"action":"insert","lines":["."]},{"start":{"row":137,"column":17},"end":{"row":137,"column":18},"action":"insert","lines":["r"]},{"start":{"row":137,"column":18},"end":{"row":137,"column":19},"action":"insert","lines":["e"]},{"start":{"row":137,"column":19},"end":{"row":137,"column":20},"action":"insert","lines":["c"]}],[{"start":{"row":137,"column":20},"end":{"row":137,"column":21},"action":"insert","lines":["i"],"id":3188},{"start":{"row":137,"column":21},"end":{"row":137,"column":22},"action":"insert","lines":["p"]},{"start":{"row":137,"column":22},"end":{"row":137,"column":23},"action":"insert","lines":["e"]},{"start":{"row":137,"column":23},"end":{"row":137,"column":24},"action":"insert","lines":["s"]}],[{"start":{"row":137,"column":24},"end":{"row":137,"column":25},"action":"insert","lines":["."],"id":3189},{"start":{"row":137,"column":25},"end":{"row":137,"column":26},"action":"insert","lines":["r"]},{"start":{"row":137,"column":26},"end":{"row":137,"column":27},"action":"insert","lines":["e"]},{"start":{"row":137,"column":27},"end":{"row":137,"column":28},"action":"insert","lines":["c"]},{"start":{"row":137,"column":28},"end":{"row":137,"column":29},"action":"insert","lines":["i"]},{"start":{"row":137,"column":29},"end":{"row":137,"column":30},"action":"insert","lines":["p"]},{"start":{"row":137,"column":30},"end":{"row":137,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":151,"column":1},"end":{"row":159,"column":36},"action":"remove","lines":["        ","         myclient = pymongo.MongoClient(\"mongodb://localhost:27017/\")","mydb = myclient[\"mydatabase\"]","mycol = mydb[\"customers\"]","","myquery = { \"address\": \"Valley 345\" }","newvalues = { \"$set\": { \"address\": \"Canyon 123\" } }","","mycol.update_one(myquery, newvalues)"],"id":3190},{"start":{"row":151,"column":0},"end":{"row":151,"column":1},"action":"remove","lines":[" "]},{"start":{"row":150,"column":9},"end":{"row":151,"column":0},"action":"remove","lines":["",""]},{"start":{"row":150,"column":8},"end":{"row":150,"column":9},"action":"remove","lines":[" "]},{"start":{"row":150,"column":4},"end":{"row":150,"column":8},"action":"remove","lines":["    "]},{"start":{"row":150,"column":0},"end":{"row":150,"column":4},"action":"remove","lines":["    "]},{"start":{"row":149,"column":45},"end":{"row":150,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":152,"column":8},"end":{"row":152,"column":9},"action":"remove","lines":[" "],"id":3191}],[{"start":{"row":152,"column":8},"end":{"row":153,"column":0},"action":"insert","lines":["",""],"id":3192},{"start":{"row":153,"column":0},"end":{"row":153,"column":8},"action":"insert","lines":["        "]},{"start":{"row":153,"column":8},"end":{"row":154,"column":0},"action":"insert","lines":["",""]},{"start":{"row":154,"column":0},"end":{"row":154,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":154,"column":4},"end":{"row":154,"column":8},"action":"remove","lines":["    "],"id":3193},{"start":{"row":154,"column":0},"end":{"row":154,"column":4},"action":"remove","lines":["    "]},{"start":{"row":153,"column":8},"end":{"row":154,"column":0},"action":"remove","lines":["",""]},{"start":{"row":153,"column":4},"end":{"row":153,"column":8},"action":"remove","lines":["    "]},{"start":{"row":153,"column":0},"end":{"row":153,"column":4},"action":"remove","lines":["    "]},{"start":{"row":152,"column":8},"end":{"row":153,"column":0},"action":"remove","lines":["",""]},{"start":{"row":152,"column":4},"end":{"row":152,"column":8},"action":"remove","lines":["    "]},{"start":{"row":152,"column":0},"end":{"row":152,"column":4},"action":"remove","lines":["    "]},{"start":{"row":151,"column":9},"end":{"row":152,"column":0},"action":"remove","lines":["",""]},{"start":{"row":151,"column":8},"end":{"row":151,"column":9},"action":"remove","lines":[" "]},{"start":{"row":151,"column":4},"end":{"row":151,"column":8},"action":"remove","lines":["    "]},{"start":{"row":151,"column":0},"end":{"row":151,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":150,"column":9},"end":{"row":151,"column":0},"action":"remove","lines":["",""],"id":3194},{"start":{"row":150,"column":8},"end":{"row":150,"column":9},"action":"remove","lines":[" "]},{"start":{"row":150,"column":4},"end":{"row":150,"column":8},"action":"remove","lines":["    "]},{"start":{"row":150,"column":0},"end":{"row":150,"column":4},"action":"remove","lines":["    "]},{"start":{"row":149,"column":45},"end":{"row":150,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":136,"column":32},"end":{"row":137,"column":0},"action":"insert","lines":["",""],"id":3195},{"start":{"row":137,"column":0},"end":{"row":137,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":137,"column":8},"end":{"row":138,"column":52},"action":"insert","lines":["form_normal = request.form.to_dict()","        flat_form = request.form.to_dict(flat=False)"],"id":3196}],[{"start":{"row":139,"column":43},"end":{"row":139,"column":44},"action":"insert","lines":["r"],"id":3200},{"start":{"row":139,"column":44},"end":{"row":139,"column":45},"action":"insert","lines":["e"]},{"start":{"row":139,"column":45},"end":{"row":139,"column":46},"action":"insert","lines":["c"]}],[{"start":{"row":139,"column":46},"end":{"row":139,"column":47},"action":"insert","lines":["i"],"id":3201},{"start":{"row":139,"column":47},"end":{"row":139,"column":48},"action":"insert","lines":["p"]},{"start":{"row":139,"column":48},"end":{"row":139,"column":49},"action":"insert","lines":["e"]},{"start":{"row":139,"column":49},"end":{"row":139,"column":50},"action":"insert","lines":[","]}],[{"start":{"row":139,"column":50},"end":{"row":139,"column":51},"action":"insert","lines":[" "],"id":3202}],[{"start":{"row":139,"column":24},"end":{"row":139,"column":31},"action":"remove","lines":[".recipe"],"id":3203}],[{"start":{"row":148,"column":12},"end":{"row":148,"column":45},"action":"remove","lines":["'created_by': session['username']"],"id":3204}],[{"start":{"row":148,"column":12},"end":{"row":148,"column":13},"action":"remove","lines":[","],"id":3205},{"start":{"row":148,"column":8},"end":{"row":148,"column":12},"action":"remove","lines":["    "]},{"start":{"row":148,"column":4},"end":{"row":148,"column":8},"action":"remove","lines":["    "]},{"start":{"row":148,"column":0},"end":{"row":148,"column":4},"action":"remove","lines":["    "]},{"start":{"row":147,"column":38},"end":{"row":148,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":147,"column":37},"end":{"row":147,"column":38},"action":"remove","lines":[","],"id":3206},{"start":{"row":147,"column":36},"end":{"row":147,"column":37},"action":"remove","lines":["]"]}],[{"start":{"row":147,"column":36},"end":{"row":147,"column":37},"action":"insert","lines":["]"],"id":3207}],[{"start":{"row":139,"column":36},"end":{"row":139,"column":44},"action":"remove","lines":["recipe, "],"id":3208}],[{"start":{"row":139,"column":34},"end":{"row":139,"column":35},"action":"remove","lines":["e"],"id":3209},{"start":{"row":139,"column":33},"end":{"row":139,"column":34},"action":"remove","lines":["n"]},{"start":{"row":139,"column":32},"end":{"row":139,"column":33},"action":"remove","lines":["o"]},{"start":{"row":139,"column":31},"end":{"row":139,"column":32},"action":"remove","lines":["_"]},{"start":{"row":139,"column":30},"end":{"row":139,"column":31},"action":"remove","lines":["e"]},{"start":{"row":139,"column":29},"end":{"row":139,"column":30},"action":"remove","lines":["t"]},{"start":{"row":139,"column":28},"end":{"row":139,"column":29},"action":"remove","lines":["a"]},{"start":{"row":139,"column":27},"end":{"row":139,"column":28},"action":"remove","lines":["d"]},{"start":{"row":139,"column":26},"end":{"row":139,"column":27},"action":"remove","lines":["p"]},{"start":{"row":139,"column":25},"end":{"row":139,"column":26},"action":"remove","lines":["u"]}],[{"start":{"row":139,"column":25},"end":{"row":139,"column":26},"action":"insert","lines":["u"],"id":3210},{"start":{"row":139,"column":26},"end":{"row":139,"column":27},"action":"insert","lines":["p"]},{"start":{"row":139,"column":27},"end":{"row":139,"column":28},"action":"insert","lines":["d"]},{"start":{"row":139,"column":28},"end":{"row":139,"column":29},"action":"insert","lines":["a"]},{"start":{"row":139,"column":29},"end":{"row":139,"column":30},"action":"insert","lines":["t"]},{"start":{"row":139,"column":30},"end":{"row":139,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":139,"column":33},"end":{"row":139,"column":35},"action":"insert","lines":["''"],"id":3211}],[{"start":{"row":139,"column":34},"end":{"row":139,"column":35},"action":"insert","lines":["_"],"id":3212},{"start":{"row":139,"column":35},"end":{"row":139,"column":36},"action":"insert","lines":["i"]},{"start":{"row":139,"column":36},"end":{"row":139,"column":37},"action":"insert","lines":["d"]}],[{"start":{"row":139,"column":38},"end":{"row":139,"column":39},"action":"insert","lines":[" "],"id":3213},{"start":{"row":139,"column":39},"end":{"row":139,"column":40},"action":"insert","lines":[":"]}],[{"start":{"row":139,"column":40},"end":{"row":139,"column":41},"action":"insert","lines":[" "],"id":3214},{"start":{"row":139,"column":41},"end":{"row":139,"column":42},"action":"insert","lines":["O"]},{"start":{"row":139,"column":42},"end":{"row":139,"column":43},"action":"insert","lines":["b"]},{"start":{"row":139,"column":43},"end":{"row":139,"column":44},"action":"insert","lines":["j"]},{"start":{"row":139,"column":44},"end":{"row":139,"column":45},"action":"insert","lines":["e"]},{"start":{"row":139,"column":45},"end":{"row":139,"column":46},"action":"insert","lines":["c"]},{"start":{"row":139,"column":46},"end":{"row":139,"column":47},"action":"insert","lines":["t"]},{"start":{"row":139,"column":47},"end":{"row":139,"column":48},"action":"insert","lines":["I"]}],[{"start":{"row":139,"column":48},"end":{"row":139,"column":49},"action":"insert","lines":["d"],"id":3215}],[{"start":{"row":139,"column":49},"end":{"row":139,"column":51},"action":"insert","lines":["()"],"id":3216}],[{"start":{"row":139,"column":50},"end":{"row":139,"column":51},"action":"insert","lines":["r"],"id":3217},{"start":{"row":139,"column":51},"end":{"row":139,"column":52},"action":"insert","lines":["e"]},{"start":{"row":139,"column":52},"end":{"row":139,"column":53},"action":"insert","lines":["c"]},{"start":{"row":139,"column":53},"end":{"row":139,"column":54},"action":"insert","lines":["i"]},{"start":{"row":139,"column":54},"end":{"row":139,"column":55},"action":"insert","lines":["p"]},{"start":{"row":139,"column":55},"end":{"row":139,"column":56},"action":"insert","lines":["e"]},{"start":{"row":139,"column":56},"end":{"row":139,"column":57},"action":"insert","lines":["_"]}],[{"start":{"row":139,"column":57},"end":{"row":139,"column":58},"action":"insert","lines":["i"],"id":3218},{"start":{"row":139,"column":58},"end":{"row":139,"column":59},"action":"insert","lines":["d"]}],[{"start":{"row":139,"column":60},"end":{"row":139,"column":61},"action":"insert","lines":["}"],"id":3219},{"start":{"row":139,"column":61},"end":{"row":139,"column":62},"action":"insert","lines":[","]}],[{"start":{"row":139,"column":62},"end":{"row":139,"column":63},"action":"insert","lines":[" "],"id":3220},{"start":{"row":139,"column":63},"end":{"row":139,"column":64},"action":"insert","lines":["{"]}],[{"start":{"row":152,"column":56},"end":{"row":152,"column":78},"action":"remove","lines":["new_recipe.inserted_id"],"id":3221},{"start":{"row":152,"column":56},"end":{"row":152,"column":57},"action":"insert","lines":["r"]},{"start":{"row":152,"column":57},"end":{"row":152,"column":58},"action":"insert","lines":["e"]},{"start":{"row":152,"column":58},"end":{"row":152,"column":59},"action":"insert","lines":["c"]},{"start":{"row":152,"column":59},"end":{"row":152,"column":60},"action":"insert","lines":["i"]},{"start":{"row":152,"column":60},"end":{"row":152,"column":61},"action":"insert","lines":["p"]},{"start":{"row":152,"column":61},"end":{"row":152,"column":62},"action":"insert","lines":["e"]}],[{"start":{"row":152,"column":62},"end":{"row":152,"column":63},"action":"insert","lines":["."],"id":3222},{"start":{"row":152,"column":63},"end":{"row":152,"column":64},"action":"insert","lines":["r"]},{"start":{"row":152,"column":64},"end":{"row":152,"column":65},"action":"insert","lines":["e"]},{"start":{"row":152,"column":65},"end":{"row":152,"column":66},"action":"insert","lines":["c"]},{"start":{"row":152,"column":66},"end":{"row":152,"column":67},"action":"insert","lines":["i"]},{"start":{"row":152,"column":67},"end":{"row":152,"column":68},"action":"insert","lines":["p"]},{"start":{"row":152,"column":68},"end":{"row":152,"column":69},"action":"insert","lines":["e"]},{"start":{"row":152,"column":69},"end":{"row":152,"column":70},"action":"insert","lines":["_"]},{"start":{"row":152,"column":70},"end":{"row":152,"column":71},"action":"insert","lines":["i"]},{"start":{"row":152,"column":71},"end":{"row":152,"column":72},"action":"insert","lines":["d"]}],[{"start":{"row":147,"column":37},"end":{"row":147,"column":38},"action":"insert","lines":[","],"id":3223}],[{"start":{"row":147,"column":38},"end":{"row":148,"column":0},"action":"insert","lines":["",""],"id":3224},{"start":{"row":148,"column":0},"end":{"row":148,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":148,"column":12},"end":{"row":148,"column":14},"action":"insert","lines":["''"],"id":3225}],[{"start":{"row":148,"column":13},"end":{"row":148,"column":14},"action":"insert","lines":["c"],"id":3226},{"start":{"row":148,"column":14},"end":{"row":148,"column":15},"action":"insert","lines":["r"]},{"start":{"row":148,"column":15},"end":{"row":148,"column":16},"action":"insert","lines":["e"]},{"start":{"row":148,"column":16},"end":{"row":148,"column":17},"action":"insert","lines":["a"]},{"start":{"row":148,"column":17},"end":{"row":148,"column":18},"action":"insert","lines":["t"]},{"start":{"row":148,"column":18},"end":{"row":148,"column":19},"action":"insert","lines":["e"]},{"start":{"row":148,"column":19},"end":{"row":148,"column":20},"action":"insert","lines":["d"]},{"start":{"row":148,"column":20},"end":{"row":148,"column":21},"action":"insert","lines":["_"]},{"start":{"row":148,"column":21},"end":{"row":148,"column":22},"action":"insert","lines":["b"]},{"start":{"row":148,"column":22},"end":{"row":148,"column":23},"action":"insert","lines":["y"]}],[{"start":{"row":148,"column":24},"end":{"row":148,"column":25},"action":"insert","lines":[" "],"id":3227},{"start":{"row":148,"column":25},"end":{"row":148,"column":26},"action":"insert","lines":[":"]}],[{"start":{"row":148,"column":26},"end":{"row":148,"column":27},"action":"insert","lines":[" "],"id":3228},{"start":{"row":148,"column":27},"end":{"row":148,"column":28},"action":"insert","lines":["s"]},{"start":{"row":148,"column":28},"end":{"row":148,"column":29},"action":"insert","lines":["e"]},{"start":{"row":148,"column":29},"end":{"row":148,"column":30},"action":"insert","lines":["s"]},{"start":{"row":148,"column":30},"end":{"row":148,"column":31},"action":"insert","lines":["s"]},{"start":{"row":148,"column":31},"end":{"row":148,"column":32},"action":"insert","lines":["i"]},{"start":{"row":148,"column":32},"end":{"row":148,"column":33},"action":"insert","lines":["o"]},{"start":{"row":148,"column":33},"end":{"row":148,"column":34},"action":"insert","lines":["n"]}],[{"start":{"row":148,"column":34},"end":{"row":148,"column":36},"action":"insert","lines":["[]"],"id":3229}],[{"start":{"row":148,"column":35},"end":{"row":148,"column":36},"action":"insert","lines":["u"],"id":3230},{"start":{"row":148,"column":36},"end":{"row":148,"column":37},"action":"insert","lines":["s"]},{"start":{"row":148,"column":37},"end":{"row":148,"column":38},"action":"insert","lines":["e"]},{"start":{"row":148,"column":38},"end":{"row":148,"column":39},"action":"insert","lines":["r"]},{"start":{"row":148,"column":39},"end":{"row":148,"column":40},"action":"insert","lines":["n"]},{"start":{"row":148,"column":40},"end":{"row":148,"column":41},"action":"insert","lines":["a"]},{"start":{"row":148,"column":41},"end":{"row":148,"column":42},"action":"insert","lines":["m"]},{"start":{"row":148,"column":42},"end":{"row":148,"column":43},"action":"insert","lines":["e"]}],[{"start":{"row":148,"column":35},"end":{"row":148,"column":36},"action":"insert","lines":["'"],"id":3231}],[{"start":{"row":148,"column":44},"end":{"row":148,"column":45},"action":"insert","lines":["'"],"id":3232}],[{"start":{"row":153,"column":68},"end":{"row":153,"column":69},"action":"remove","lines":["e"],"id":3233},{"start":{"row":153,"column":67},"end":{"row":153,"column":68},"action":"remove","lines":["p"]},{"start":{"row":153,"column":66},"end":{"row":153,"column":67},"action":"remove","lines":["i"]},{"start":{"row":153,"column":65},"end":{"row":153,"column":66},"action":"remove","lines":["c"]},{"start":{"row":153,"column":64},"end":{"row":153,"column":65},"action":"remove","lines":["e"]},{"start":{"row":153,"column":63},"end":{"row":153,"column":64},"action":"remove","lines":["r"]}],[{"start":{"row":153,"column":62},"end":{"row":153,"column":63},"action":"insert","lines":["s"],"id":3234}],[{"start":{"row":153,"column":62},"end":{"row":153,"column":63},"action":"remove","lines":["s"],"id":3235}],[{"start":{"row":153,"column":62},"end":{"row":153,"column":63},"action":"insert","lines":["s"],"id":3236}],[{"start":{"row":153,"column":46},"end":{"row":153,"column":68},"action":"remove","lines":["recipe_id=recipes._id)"],"id":3237},{"start":{"row":153,"column":46},"end":{"row":153,"column":47},"action":"insert","lines":[" "]}],[{"start":{"row":153,"column":47},"end":{"row":153,"column":110},"action":"insert","lines":["recipes=mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)})"],"id":3238}],[{"start":{"row":153,"column":8},"end":{"row":153,"column":9},"action":"insert","lines":["#"],"id":3239}],[{"start":{"row":152,"column":0},"end":{"row":152,"column":4},"action":"insert","lines":["    "],"id":3240}],[{"start":{"row":152,"column":4},"end":{"row":152,"column":8},"action":"insert","lines":["    "],"id":3241}],[{"start":{"row":152,"column":8},"end":{"row":152,"column":48},"action":"insert","lines":["flash('You were successfully logged in')"],"id":3242}],[{"start":{"row":152,"column":15},"end":{"row":152,"column":46},"action":"remove","lines":["You were successfully logged in"],"id":3243},{"start":{"row":152,"column":15},"end":{"row":152,"column":16},"action":"insert","lines":["R"]},{"start":{"row":152,"column":16},"end":{"row":152,"column":17},"action":"insert","lines":["e"]},{"start":{"row":152,"column":17},"end":{"row":152,"column":18},"action":"insert","lines":["c"]},{"start":{"row":152,"column":18},"end":{"row":152,"column":19},"action":"insert","lines":["i"]},{"start":{"row":152,"column":19},"end":{"row":152,"column":20},"action":"insert","lines":["p"]},{"start":{"row":152,"column":20},"end":{"row":152,"column":21},"action":"insert","lines":["e"]}],[{"start":{"row":152,"column":21},"end":{"row":152,"column":22},"action":"insert","lines":[" "],"id":3244},{"start":{"row":152,"column":22},"end":{"row":152,"column":23},"action":"insert","lines":["h"]},{"start":{"row":152,"column":23},"end":{"row":152,"column":24},"action":"insert","lines":["a"]},{"start":{"row":152,"column":24},"end":{"row":152,"column":25},"action":"insert","lines":["s"]}],[{"start":{"row":152,"column":25},"end":{"row":152,"column":26},"action":"insert","lines":[" "],"id":3245},{"start":{"row":152,"column":26},"end":{"row":152,"column":27},"action":"insert","lines":["b"]},{"start":{"row":152,"column":27},"end":{"row":152,"column":28},"action":"insert","lines":["e"]},{"start":{"row":152,"column":28},"end":{"row":152,"column":29},"action":"insert","lines":["e"]},{"start":{"row":152,"column":29},"end":{"row":152,"column":30},"action":"insert","lines":["n"]}],[{"start":{"row":152,"column":30},"end":{"row":152,"column":31},"action":"insert","lines":[" "],"id":3246},{"start":{"row":152,"column":31},"end":{"row":152,"column":32},"action":"insert","lines":["s"]},{"start":{"row":152,"column":32},"end":{"row":152,"column":33},"action":"insert","lines":["u"]},{"start":{"row":152,"column":33},"end":{"row":152,"column":34},"action":"insert","lines":["c"]},{"start":{"row":152,"column":34},"end":{"row":152,"column":35},"action":"insert","lines":["c"]},{"start":{"row":152,"column":35},"end":{"row":152,"column":36},"action":"insert","lines":["e"]},{"start":{"row":152,"column":36},"end":{"row":152,"column":37},"action":"insert","lines":["s"]},{"start":{"row":152,"column":37},"end":{"row":152,"column":38},"action":"insert","lines":["s"]},{"start":{"row":152,"column":38},"end":{"row":152,"column":39},"action":"insert","lines":["f"]}],[{"start":{"row":152,"column":39},"end":{"row":152,"column":40},"action":"insert","lines":["u"],"id":3247},{"start":{"row":152,"column":40},"end":{"row":152,"column":41},"action":"insert","lines":["l"]},{"start":{"row":152,"column":41},"end":{"row":152,"column":42},"action":"insert","lines":["l"]},{"start":{"row":152,"column":42},"end":{"row":152,"column":43},"action":"insert","lines":["y"]}],[{"start":{"row":152,"column":43},"end":{"row":152,"column":44},"action":"insert","lines":[" "],"id":3248},{"start":{"row":152,"column":44},"end":{"row":152,"column":45},"action":"insert","lines":["u"]},{"start":{"row":152,"column":45},"end":{"row":152,"column":46},"action":"insert","lines":["p"]},{"start":{"row":152,"column":46},"end":{"row":152,"column":47},"action":"insert","lines":["d"]},{"start":{"row":152,"column":47},"end":{"row":152,"column":48},"action":"insert","lines":["a"]},{"start":{"row":152,"column":48},"end":{"row":152,"column":49},"action":"insert","lines":["t"]},{"start":{"row":152,"column":49},"end":{"row":152,"column":50},"action":"insert","lines":["e"]},{"start":{"row":152,"column":50},"end":{"row":152,"column":51},"action":"insert","lines":["d"]}]]},"ace":{"folds":[],"scrolltop":1744,"scrollleft":0,"selection":{"start":{"row":152,"column":51},"end":{"row":152,"column":51},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":123,"state":"start","mode":"ace/mode/python"}},"timestamp":1567534811095,"hash":"7564b077ad10deaa5beb52f815efb0621ca6721c"}